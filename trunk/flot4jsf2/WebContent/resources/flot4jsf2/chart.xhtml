<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:composite="http://java.sun.com/jsf/composite">

	<!-- INTERFACE -->
	<composite:interface>
		<composite:attribute name="width" required="true" />
		<composite:attribute name="height" required="true" />
		
		<composite:attribute name="yticks" required="false" />
		<composite:attribute name="ymin" required="false" />
		<composite:attribute name="ymax" required="false" />
		
		<composite:attribute name="data" required="false" />
		
		<composite:attribute name="type" required="true" />
		
		<composite:attribute name="label" required="false" />
		<composite:attribute name="color" required="false" />
		
		<composite:attribute name="fill" required="false" />
		<composite:attribute name="steps" required="false" />
	</composite:interface>

	<!-- IMPLEMENATION -->
	<composite:implementation>
		<div id="#{cc.clientId}" style="width: #{cc.attrs.width}px; height: #{cc.attrs.height}px">
		<h:outputScript library="javascript" name="jquery.js" target="head" />
		<h:outputScript library="javascript" name="jquery.flot.js"
			target="head" />


		<script
			language="javascript" type="text/javascript"> 
$(function () {
	
	fdata=#{dataSerializer.serialize(cc.attrs.data)};
	flabel="#{cc.attrs.label}";

	yticks= "#{cc.attrs.ticks}";
	if (yticks=="") yticks=null;

	ymin = "#{cc.attrs.ymin}";
	if (ymin=="") ymin=null;

	ymax = "#{cc.attrs.ymax}";
	if (ymax=="") ymax=null;

	scolor = "#{cc.attrs.color}";
	if (scolor=="") scolor=null;

	sfill = "#{cc.attrs.fill}";
	if (sfill=="") sfill=false;

	ssteps = "#{cc.attrs.steps}";
	if (ssteps=="") ssteps=null;

	ftype = "#{cc.attrs.type}";
		fseries = new Object();
	if (ftype.indexOf("lines") != -1)
		fseries.lines= {show:true, fill: sfill, steps: ssteps};
	if (ftype.indexOf("bars") != -1)
		fseries.bars= {show:true, fill: sfill};
	if (ftype.indexOf("dots") != -1)
		fseries.points= {show:true};
	if (scolor != null)
		fseries.color=scolor;
	
    $.plot($("##{cc.clientId}"), [
        { label: flabel,  data: fdata}
    ], {
        series: fseries,
        //xaxis: {
        //	min: -5,
        //	max: 10
            //ticks: [0, [Math.PI/2, "\u03c0/2"], [Math.PI, "\u03c0"], [Math.PI * 3/2, "3\u03c0/2"], [Math.PI * 2, "2\u03c0"]]
        //},
        yaxis: {
            ticks: yticks,
            min: ymin,
            max: ymax
        },
        grid: {
            backgroundColor: { colors: ["#fff", "#eee"] }
        }
    });
});
</script></div>
	</composite:implementation>
</ui:composition>